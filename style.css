/* ================== THEME TOKENS (Dark por defecto) ================== */
:root{
  /* superficies y texto */
  --bg:#08090c; --bg-secondary:#0d0e12;
  --surface:#1a1c24; --surface-hover:#20222b; --surface-elevated:#242731;
  --border:#2d3142; --border-subtle:#1e2029;
  --text-primary:#f8fafc; --text-secondary:#94a3b8; --text-muted:#64748b;

  /* acento */
  --accent:#ef4444; --accent-hover:#dc2626; --accent-light:#f87171;
  --dots:#ff6b6b;

  /* navegaci√≥n / player */
  --dock-bg:#0b0a11;        /* fondo de barra inferior y dock */
  --mini-bg:rgba(11,10,17,1);
  --track-bg:rgba(255,255,255,.12);
  --nav-ink:#cbd5e1; --nav-ink-hover:#e5e7eb; --nav-ink-active:#ffffff;

  --title-size:14px; --subtitle-size:12px;

  --radius:16px; --radius-sm:12px; --side-pad:20px;

  --seek-h:72px; --nav-h:64px;
  --safe:env(safe-area-inset-bottom);
  --hero-t:0;  /* Variable para el scroll */
}

/* ================== THEME Light ================== */
:root[data-theme="light"]{
  --bg:#fff; --bg-secondary:#f1f5f9;
  --surface:#e2e8f0; --surface-hover:#cbd5e1; --surface-elevated:#94a3b8;
  --border:#a5b5cb; --border-subtle:#e2e8f0;
  --text-primary:#1a202c; --text-secondary:#475569; --text-muted:#94a3b8;

  --accent:#ef4444; --accent-hover:#dc2626; --accent-light:#fca5a5;
  --dots:#ef4444;

  --dock-bg:#f1f5f9;
  --mini-bg:rgba(241,245,249,1);
  --track-bg:rgba(0,0,0,.12);
  --nav-ink:#334155; --nav-ink-hover:#1e293b; --nav-ink-active:#0f172a;
}
* {
  box-sizing: border-box;
}
html, body{
  -webkit-tap-highlight-color: transparent;
}
body{
  margin:0; font-family:Inter, sans-serif;
  background-color:var(--bg-secondary); color:var(--text-primary);
  height:100vh;
  padding-bottom:calc(var(--nav-h) + var(--seek-h) + var(--safe, 0px));
}
img{
  user-select:none;
}
.app-main{
  position:relative; width:100%; height:100%;
}
.view{
  position:absolute; inset:0; overflow-y:auto; overflow-x:hidden;
  transition: opacity .3s ease, transform .3s ease-in-out;
  transform:translateX(100vw); opacity:0;
  pointer-events:none;
  padding:var(--side-pad) 0;
  padding-bottom:calc(var(--nav-h) + var(--seek-h) + var(--safe, 0px));
}
.view.active{
  transform:translateX(0); opacity:1; pointer-events:all;
  transition: opacity .3s ease, transform .3s ease;
}
.view-search.active{
  z-index:10;
}

/* ================== GENERAL UI ================== */
.logo-float{
  position:fixed; top:20px; left:20px; z-index:100;
  width:40px; height:40px; border-radius:100%;
}
.theme-toggle{
  position:fixed; top:20px; right:20px; z-index:100;
  -webkit-appearance:none; border:none; padding:0; cursor:pointer;
  width:40px; height:40px; border-radius:100%;
  display:flex; align-items:center; justify-content:center;
  background-color:var(--surface);
  box-shadow:0 1px 3px rgba(0,0,0,.1);
  transition:var(--fast);
}
.theme-toggle .ico{
  width:24px; height:24px; position:absolute;
  transition:transform .3s ease;
}
.theme-toggle .sun{
  background:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%2394a3b8' d='M12 2a5 5 0 015 5c0 .36-.04.72-.11 1.07l2.12 2.12c.98-.3 1.96-.58 2.9-.84l-1.07-1.07c-1.3-1.3-3.23-2.06-5.23-2.06a5 5 0 01-5 5c0 2 .76 3.93 2.06 5.23l1.07 1.07c.26-.94.54-1.92.84-2.9l-2.12-2.12c-.35.07-.71.11-1.07.11a5 5 0 01-5-5c0-1.87.97-3.64 2.54-4.88L3.71 3.71A10.02 10.02 0 002 7a10 10 0 0010 10c.8 0 1.58-.1 2.33-.29l-1.12-1.12c-1.25-.97-2.04-2.34-2.26-3.88l-1.22-1.22c-1.3-1.3-2.06-3.23-2.06-5.23a5 5 0 015-5c1.87 0 3.64.79 4.88 2.04l1.41-1.41c-1.72-1.72-4.04-2.83-6.66-2.83z'/%3E%3C/svg%3E") no-repeat center/contain;
  opacity:0; transform:scale(0.8);
}
.theme-toggle .moon{
  background:url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill='%2394a3b8' d='M12 2a10 10 0 100 20 10 10 0 000-20zM5.5 12a6.5 6.5 0 1113 0 6.5 6.5 0 01-13 0z'/%3E%3C/svg%3E") no-repeat center/contain;
  opacity:1; transform:scale(1);
}
body[data-theme="light"] .theme-toggle .sun{
  opacity:1; transform:scale(1);
}
body[data-theme="light"] .theme-toggle .moon{
  opacity:0; transform:scale(0.8);
}
.search-fab{
  position:fixed; bottom:calc(var(--nav-h) + var(--seek-h) + 20px + var(--safe, 0px)); right:20px; z-index:10;
  -webkit-appearance:none; border:none; padding:0; cursor:pointer;
  width:44px; height:44px; border-radius:100%;
  display:flex; align-items:center; justify-content:center;
  background-color:var(--accent);
  box-shadow:0 2px 4px rgba(0,0,0,.15);
  transition:transform .3s ease-in-out;
  color:white;
}
.search-fab-global{
  display:flex;
  gap:8px;
  width:auto;
  padding:0 20px;
  border-radius:99px;
  min-width:44px;
  height:44px;
  transform:translateY(0);
}
.view-search.active .search-fab-global{
  transform:translateY(100px);
}
.header{
  display:flex; align-items:center;
  height:44px; padding:0 var(--side-pad);
}
.header-title{
  font-size:24px; font-weight:700; margin:0;
}
.search-header{
  position:sticky; top:0; z-index:1;
  padding:20px var(--side-pad) 8px;
  background:var(--bg-secondary);
  backdrop-filter:blur(10px);
  -webkit-backdrop-filter:blur(10px);
  border-bottom:1px solid var(--border-subtle);
}
.search-bar{
  position:relative;
  display:flex; align-items:center;
  background:var(--surface); border-radius:99px;
  height:44px; padding:0 16px;
  box-shadow:0 1px 3px rgba(0,0,0,.1);
}
.search-bar svg{
  width:20px; height:20px;
  color:var(--text-secondary);
}
.search-bar input{
  width:100%; height:100%; border:none; outline:none;
  background:transparent; font-size:16px; color:var(--text-primary);
  padding:0 8px;
}
.search-bar input::placeholder{
  color:var(--text-muted);
}
.clear-btn{
  background:none; border:none; padding:0; cursor:pointer;
  color:var(--text-muted); width:24px; height:24px;
  display:flex; align-items:center; justify-content:center;
  opacity:0; pointer-events:none;
  transition:opacity .2s ease;
}
.search-bar.active .clear-btn{
  opacity:1; pointer-events:all;
}

/* ================== NAVIGATION DOCK ================== */
.nav-dock{
  position:fixed; bottom:0; left:0; right:0; z-index:20;
  display:flex; justify-content:space-around;
  height:var(--nav-h); padding-bottom:var(--safe, 0px);
  background-color:var(--dock-bg);
  box-shadow:0 -1px 4px rgba(0,0,0,.05);
  border-top:1px solid var(--border-subtle);
}
.nav-btn{
  flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:2px;
  background:none; border:none; cursor:pointer;
  padding:0; color:var(--nav-ink); transition:color .3s ease;
}
.nav-btn.active{
  color:var(--nav-ink-active);
}
.nav-btn:hover{
  color:var(--nav-ink-hover);
}
.nav-btn svg{
  width:24px; height:24px; fill:currentColor;
}
.nav-btn span{
  font-size:10px; font-weight:500;
}

/* ================== MINI PLAYER ================== */
.mini-player{
  position:fixed; bottom:var(--nav-h); left:0; right:0; z-index:15;
  height:var(--seek-h);
  background:var(--mini-bg);
  display:flex; align-items:center;
  padding:0 var(--side-pad);
  gap:12px;
  border-top:1px solid var(--border-subtle);
  transform:translateY(100%);
  transition:transform .3s ease-in-out;
}
.mini-player.active{
  transform:translateY(0);
}
.mini-cover{
  width:48px; height:48px; border-radius:8px; overflow:hidden;
  flex-shrink:0;
}
.mini-cover img{
  width:100%; height:100%; object-fit:cover; display:block;
}
.mini-meta{
  flex:1; min-width:0;
}
.mini-title, .mini-artist{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.mini-title{
  font-size:var(--title-size); font-weight:600;
}
.mini-artist{
  font-size:var(--subtitle-size); color:var(--text-secondary);
}
.mini-controls{
  display:flex; align-items:center; gap:4px;
}
.mini-btn{
  width:44px; height:44px; border-radius:100%;
  -webkit-appearance:none; border:none; padding:0; cursor:pointer;
  background:none; color:var(--text-primary);
  display:flex; align-items:center; justify-content:center;
  transition:transform .2s ease;
}
.mini-btn:active{
  transform:scale(0.9);
}
.mini-btn svg{
  width:24px; height:24px; fill:currentColor;
}
.mini-player .play-btn svg{
  transition: transform .2s ease;
  transform:translateX(2px);
}
.mini-player .play-btn.active svg{
  transform:translateX(0);
}
.track-progress{
  position:absolute; top:-2px; left:0; width:100%; height:2px;
  background:var(--track-bg);
  pointer-events:none;
}
.track-progress-bar{
  width:0; height:100%; background:var(--accent);
  transition:width .5s linear;
}

/* ================== PLAYER VIEW ================== */
#view-player.view{
  z-index:100;
  padding:0;
  display:flex; flex-direction:column;
  background-color:var(--bg);
}
.player-header{
  position:sticky; top:0; z-index:2;
  display:flex; align-items:center; justify-content:space-between;
  padding:12px var(--side-pad);
  height:64px;
  background:var(--bg);
}
.player-close, .player-queue-btn{
  -webkit-appearance:none; border:none; padding:0; cursor:pointer;
  background:none; color:var(--text-secondary);
  width:40px; height:40px; border-radius:100%;
  display:flex; align-items:center; justify-content:center;
}
.player-close svg, .player-queue-btn svg{
  width:24px; height:24px; fill:currentColor;
}
.player-title{
  font-size:16px; font-weight:600;
}
.player-hero{
  position:relative; width:100%; height:0;
  padding-bottom:100%;
  overflow:hidden;
  transition:padding-bottom .3s ease-in-out;
  transform:scale(calc(1 - var(--hero-t) * 0.2));
  opacity:calc(1 - var(--hero-t) * 0.8);
  border-radius:calc(var(--radius) * var(--hero-t));
  margin-bottom:calc(24px - var(--hero-t) * 12px);
}
.player-hero::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(to top, rgba(8,9,12,.85) 0%, rgba(8,9,12,.2) 60%, rgba(8,9,12,0) 100%);
  opacity:calc(1 - var(--hero-t));
}
.player-hero img{
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;
  transition: border-radius .3s ease;
  border-radius:calc(var(--radius) * var(--hero-t));
}
.player-meta{
  position:absolute; left:var(--side-pad); right:var(--side-pad); bottom:20px; z-index:1;
  transition: transform .3s ease, opacity .3s ease;
  transform:translateY(calc(var(--hero-t) * 50px));
  opacity:calc(1 - var(--hero-t));
}
.player-meta h1{
  font-size:24px; font-weight:700; margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.player-meta div{
  font-size:16px; color:var(--text-secondary);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.player-controls{
  padding:0 var(--side-pad);
  display:flex; flex-wrap:wrap;
  align-items:center;
  gap:8px 0;
  position:relative;
}
.player-time{
  font-size:12px; color:var(--text-secondary);
}
.track-progress.large{
  position:static;
  flex:1;
  height:4px;
  background:var(--track-bg);
  border-radius:2px;
}
.track-progress.large .track-progress-bar{
  border-radius:2px;
}
.player-btns{
  display:flex; justify-content:center; align-items:center;
  width:100%; margin-top:12px;
}
.player-btn{
  width:56px; height:56px; border-radius:100%;
  -webkit-appearance:none; border:none; padding:0; cursor:pointer;
  background:none; color:var(--text-primary);
  display:flex; align-items:center; justify-content:center;
  transition:transform .2s ease;
}
.player-btn:active{
  transform:scale(0.9);
}
.player-btn svg{
  width:32px; height:32px; fill:currentColor;
}
.player-btn.play-btn svg{
  transform:translateX(3px);
}
.player-btn.play-btn.active svg{
  transform:translateX(0);
}
.player-bottom{
  width:100%;
  display:flex; align-items:center; justify-content:space-between;
  margin-top:20px;
}
.btn-dots{
  color:var(--text-secondary);
  width:44px; height:44px;
}
.btn-dots svg{
  width:24px; height:24px;
}

/* ================== HOME Y GRIDS ================== */
.home-section{
  padding:0 var(--side-pad);
  margin-bottom:24px;
}
.home-row{ display:flex; align-items:flex-end; justify-content:space-between; gap:10px; margin: 0 0 8px; }
.home-title{ margin:0; font-size:16px; font-weight:700; }
.home-sub{ margin:0; font-size:12px; color:var(--text-secondary); }
.home-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap:12px;
}
.home-card{
  position:relative; border-radius:14px; overflow:hidden;
  background:var(--surface); border:1px solid var(--border-subtle);
  cursor:pointer; transition:var(--fast); aspect-ratio:16/9;
  animation: fadeIn 0.5s ease-out;
}
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
.home-card:hover{ transform:translateY(-2px); background:var(--surface-hover); border-color:var(--border); }
.home-card img{ width:100%; height:100%; object-fit:cover; display:block; }
.home-card::after{ content:""; position:absolute; inset:0;
  background:linear-gradient(to top, rgba(8,9,12,.85) 0%, rgba(8,9,12,.2) 60%, rgba(8,9,12,0) 100%); }
.home-card .home-meta{ position:absolute; left:10px; right:10px; bottom:8px; z-index:1; }
.home-card .home-title-meta{
  font-size:14px; font-weight:600; color:white; margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.home-card .home-artist-meta{
  font-size:12px; font-weight:400; color:rgba(255,255,255,.8); margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}

/* ================== SEARCH GRID ================== */
.search-grid{
  display:grid; grid-template-columns:1fr; gap:8px;
  padding:0 var(--side-pad);
}
.search-card{
  display:flex; align-items:center; gap:12px;
  background:var(--surface); border-radius:var(--radius-sm);
  padding:8px; cursor:pointer;
}
.search-card-cover{
  width:48px; height:48px; border-radius:6px; overflow:hidden;
  flex-shrink:0;
}
.search-card-cover img{
  width:100%; height:100%; object-fit:cover; display:block;
}
.search-card-meta{
  flex:1; min-width:0;
}
.search-card-meta h3{
  font-size:var(--title-size); font-weight:600; margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.search-card-meta div{
  font-size:var(--subtitle-size); color:var(--text-secondary); margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.search-card .dots-btn{
  background:none; border:none; padding:0; cursor:pointer;
  width:40px; height:40px; border-radius:100%;
  display:flex; align-items:center; justify-content:center;
  color:var(--text-secondary); flex-shrink:0;
}
.search-card .dots-btn svg{
  width:24px; height:24px;
}
#sentinel{
  height:1px;
}

/* ================== FAVORITES / TRACK LISTS ================== */
.hero-container{
  position:relative;
  width:100%;
  height:0;
  padding-bottom:100%;
  overflow:hidden;
  transition: transform .3s ease-in-out, opacity .3s ease;
  transform:scale(calc(1 - var(--hero-t) * 0.2));
  opacity:calc(1 - var(--hero-t) * 0.8);
  border-radius:calc(var(--radius) * var(--hero-t));
  margin-bottom:calc(24px - var(--hero-t) * 12px);
}
.hero-container::after{
  content:"";
  position:absolute; inset:0;
  background:linear-gradient(to top, rgba(8,9,12,.85) 0%, rgba(8,9,12,.2) 60%, rgba(8,9,12,0) 100%);
  opacity:calc(1 - var(--hero-t));
}
.hero-cover{
  position:absolute; inset:0; width:100%; height:100%; object-fit:cover; display:block;
  transition: border-radius .3s ease;
  border-radius:calc(var(--radius) * var(--hero-t));
}
.hero-meta{
  position:absolute; left:var(--side-pad); right:var(--side-pad); bottom:20px; z-index:1;
  transition: transform .3s ease, opacity .3s ease;
  transform:translateY(calc(var(--hero-t) * 50px));
  opacity:calc(1 - var(--hero-t));
}
.hero-title{
  font-size:24px; font-weight:700; margin:0;
}
.hero-subtitle{
  font-size:16px; color:var(--text-secondary); margin:0;
}
.track-list{
  list-style:none; padding:0 var(--side-pad); margin:0;
  animation: fadeIn 0.5s ease-out;
}
.track-card{
  display:flex; align-items:center; gap:12px;
  background:var(--surface); border-radius:var(--radius-sm);
  padding:8px; cursor:pointer; margin-bottom:8px;
}
.track-card-cover{
  width:48px; height:48px; border-radius:6px; overflow:hidden;
  flex-shrink:0;
}
.track-card-cover img{
  width:100%; height:100%; object-fit:cover; display:block;
}
.track-card-meta{
  flex:1; min-width:0;
}
.track-card-meta h3{
  font-size:var(--title-size); font-weight:600; margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.track-card-meta div{
  font-size:var(--subtitle-size); color:var(--text-secondary); margin:0;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.track-card .dots-btn{
  background:none; border:none; padding:0; cursor:pointer;
  width:40px; height:40px; border-radius:100%;
  display:flex; align-items:center; justify-content:center;
  color:var(--text-secondary); flex-shrink:0;
}
.track-card .dots-btn svg{
  width:24px; height:24px;
}
.track-card.active{
  background:var(--surface-hover);
}
.track-card.active .track-card-meta h3{
  color:var(--accent);
}

