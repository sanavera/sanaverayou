/* ======= Tema (oscuro con acento rojo) ======= */
:root{
  --bg:#0e0f13;
  --elev:#171a22;
  --tile:#1c1f29;
  --tile-hover:#222635;
  --muted:#aab0c0;
  --text:#f6f7fb;
  --brand:#e74a56;   /* rojo principal */
  --brand-2:#ff6b77; /* rojo hover */
  --line:#2a2f3e;

  --header-h:110px;
  --footer-safe:max(92px,68px + env(safe-area-inset-bottom));
  --side-pad:16px;

  --transition:160ms cubic-bezier(.4,0,.2,1);
  --shadow-sm:0 2px 8px rgba(0,0,0,.15);
  --shadow-md:0 4px 16px rgba(0,0,0,.25);
  --shadow-lg:0 8px 32px rgba(0,0,0,.4);
  --radius:12px;
  --radius-sm:8px;
}

html{color-scheme:dark;}
body{
  margin:0; background:linear-gradient(135deg,var(--bg),#0b0c11);
  color:var(--text); font-family:Inter,system-ui,Roboto,Segoe UI,sans-serif;
}

/* ======= Topbar ======= */
.topbar{
  position:sticky; top:0; z-index:30;
  background:var(--elev); border-bottom:1px solid var(--line);
  padding:18px var(--side-pad) 14px; box-shadow:var(--shadow-md);
}
.brand{display:flex; align-items:center; gap:10px; margin-bottom:12px;}
.brand-badge{
  width:36px;height:36px;border-radius:50%;display:grid;place-items:center;
  background:var(--tile); border:1px solid var(--line); font-weight:700;
}
.brand-text{font-size:18px;}
.search-row{ display:flex; gap:10px; }
#q{
  flex:1; background:var(--tile); color:var(--text);
  border:2px solid transparent; border-radius:var(--radius);
  padding:14px 16px; font-size:15px; outline:none; transition:all var(--transition);
  box-shadow:var(--shadow-sm);
}
#q::placeholder{ color:var(--muted); }
#q:focus{ border-color:var(--brand); background:var(--elev); }

/* Sugerencia (una sola) */
.suggestion{margin-top:8px;}
.suggestion button{
  width:100%; text-align:left; border:1px dashed var(--line); border-radius:10px;
  padding:10px 12px; background:var(--tile); color:var(--muted);
  transition:all var(--transition); cursor:pointer;
}
.suggestion button:hover{ background:var(--tile-hover); color:var(--text); }
.hide{display:none!important;}
.muted{ color:var(--muted); }

/* ======= Resultados ======= */
.results{
  padding:14px var(--side-pad) 140px; display:grid;
  grid-template-columns:repeat(1,minmax(0,1fr)); gap:10px;
}
.card{
  display:flex; gap:12px; align-items:center;
  background:var(--tile); border:1px solid var(--line);
  border-radius:var(--radius); padding:10px; transition:all var(--transition);
}
.card:hover{ background:var(--tile-hover); transform:translateY(-1px); }
.thumb{ width:56px;height:56px;border-radius:10px;background:#000 center/cover no-repeat;flex:0 0 56px; }
.meta{ flex:1; min-width:0; }
.title{ font-weight:600; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.subtitle{ color:var(--muted); font-size:13px; }
.actions{ display:flex; gap:8px; margin-left:auto; }
.heart-btn{
  width:36px;height:36px;border-radius:50%;border:1px solid var(--line);
  background:transparent; color:var(--muted); display:grid;place-items:center; cursor:pointer;
  transition:all var(--transition);
}
.heart-btn.active{ color:#ff6b77; border-color:#ff6b77; }
.heart-btn:hover{ background:var(--tile-hover); }

/* EQ mini junto al título cuando está sonando */
.eq{ display:inline-flex; gap:2px; margin-left:8px; vertical-align:middle; }
.eq span{ width:3px; height:12px; background:var(--brand); border-radius:2px; animation:bar 1.2s ease-in-out infinite; opacity:.9;}
.eq span:nth-child(2){animation-delay:.2s;}
.eq span:nth-child(3){animation-delay:.4s;}
@keyframes bar{0%,100%{transform:scaleY(.3);opacity:.6}50%{transform:scaleY(1);opacity:1}}

/* ======= Botonera / Player ======= */
.controls-section{
  position:fixed; left:0; right:0; bottom:0; z-index:60;
  background:rgba(22,24,33,.92); backdrop-filter:blur(16px);
  border-top:1px solid var(--line); padding:14px var(--side-pad) calc(12px + env(safe-area-inset-bottom));
  box-shadow:var(--shadow-lg); border-radius:16px 16px 0 0;
}
.controls{ display:flex; justify-content:center; align-items:center; gap:12px; margin-bottom:10px; }
.btn{
  width:44px;height:44px;border-radius:50%; border:1px solid var(--line);
  background:var(--tile); color:var(--text); display:grid; place-items:center; cursor:pointer;
  transition:all var(--transition); box-shadow:var(--shadow-sm);
}
.btn:hover{ background:var(--tile-hover); transform:translateY(-1px); }
.btn-play{ width:62px; height:62px; background:var(--brand); color:#0b1116; border:none; }
.btn-play:hover{ background:var(--brand-2); }
.btn .pause{ display:none; }
.btn-play.playing .play{ display:none; }
.btn-play.playing .pause{ display:block; }
.ic{ width:22px; height:22px; fill:currentColor; }
.progress-container{ width:100%; }
.seek-bar{
  width:100%; -webkit-appearance:none; appearance:none; height:6px; background:var(--tile); border-radius:4px; outline:none;
}
.seek-bar::-webkit-slider-thumb{ -webkit-appearance:none; width:16px; height:16px; border-radius:50%; background:var(--brand); box-shadow:var(--shadow-sm); }
.time-info{ display:flex; justify-content:space-between; color:var(--muted); font-size:13px; padding:6px 2px 0; }
.footer-text{ text-align:center; color:var(--muted); font-size:10px; margin-top:6px; }

/* ======= FAB ======= */
.fab{
  position:fixed; right:18px; bottom:118px; z-index:61;
  width:60px;height:60px;border-radius:18px;background:#ff5a66;border:none;
  display:grid;place-items:center; color:#161821; box-shadow:var(--shadow-lg); cursor:pointer;
}
.fab:hover{ filter:brightness(1.08); transform:translateY(-1px); }
.fab .ic{ width:26px;height:26px; }

/* ======= Modal Favoritos ======= */
.modal{ position:fixed; inset:0; z-index:1000; display:none; }
.modal.show{ display:block; }
.modal-content{
  position:fixed; inset:0; display:flex; flex-direction:column; background:rgba(14,15,19,.96);
  backdrop-filter:blur(8px);
}
.fav-hero{ position:relative; height:36vh; min-height:220px; border-bottom:1px solid var(--line); }
.fav-hero-blur{ position:absolute; inset:0; background-position:center; background-size:cover; filter:blur(16px) brightness(.6); transform:scale(1.1); }
.fav-hero-text{ position:absolute; left:16px; right:16px; bottom:16px; }
.fav-hero-text h2{ margin:6px 0 0; font-size:clamp(20px,6vw,28px); }
.close-x{
  position:absolute; right:16px; top:16px; width:56px;height:56px;border-radius:50%; background:rgba(0,0,0,.45);
  border:1px solid var(--line); color:#fff; display:grid; place-items:center; cursor:pointer;
}
.close-x:hover{ background:rgba(0,0,0,.6); }

#favList{
  flex:1; overflow:auto; padding:14px var(--side-pad) 160px; display:flex; flex-direction:column; gap:8px;
}
.playlist-item{
  display:flex; align-items:center; gap:12px; background:var(--tile); border:1px solid var(--line);
  border-radius:14px; padding:10px; transition:all var(--transition); position:relative;
}
.playlist-item:hover{ background:var(--tile-hover); transform:translateY(-1px); }
.playlist-item.active{ border-left:3px solid var(--brand); }
.playlist-item img{ width:56px;height:56px;border-radius:10px; object-fit:cover; }
.playlist-item .info{ flex:1; min-width:0; }
.playlist-item .info h3{ margin:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.playlist-item .info p{ margin:.25rem 0 0; color:var(--muted); font-size:13px; }
.playlist-item .remove{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:40px;height:40px;border-radius:12px;border:1px solid var(--line); background:transparent; color:var(--muted);
  display:grid;place-items:center; cursor:pointer;
}
.playlist-item .remove:hover{ background:var(--tile-hover); color:var(--text); }

.fab-alt{ right:18px; bottom:118px; background:#394150; color:#d7dee9; }

/* ======= Iframe oculto ======= */
#yt-holder{ position:fixed; width:1px;height:1px; overflow:hidden; opacity:0; pointer-events:none; left:-9999px; top:-9999px; }

/* ======= Responsive ======= */
@media (min-width:520px){
  .results{ grid-template-columns:repeat(2,minmax(0,1fr)); gap:12px; }
}
@media (min-width:820px){
  .results{ grid-template-columns:repeat(3,minmax(0,1fr)); gap:14px; }
}
