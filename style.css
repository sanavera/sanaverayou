:root{
  --bg:#08090c; --bg2:#0d0e12;
  --surface:#151720; --s2:#1b1e28; --s3:#222634;
  --text:#f8fafc; --muted:#94a3b8; --sub:#64748b;
  --accent:#ef4444; --accent2:#dc2626;
  --r:16px; --r-sm:12px; --pad:20px;
  --neu-out: 8px 8px 16px rgba(0,0,0,.5), -6px -6px 14px rgba(255,255,255,.03);
  --neu-in : inset 8px 8px 16px rgba(0,0,0,.45), inset -6px -6px 14px rgba(255,255,255,.03);
}
html{color-scheme:dark}
body{
  margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;color:var(--text);
  background:radial-gradient(circle at 20% 80%,rgba(59,130,246,.05),transparent 50%),
             radial-gradient(circle at 80% 20%,rgba(139,92,246,.04),transparent 50%),
             linear-gradient(135deg,var(--bg),var(--bg2));
}
*{box-sizing:border-box}
button{font:inherit}

/* Topbar + mini player */
.topbar{position:sticky;top:0;z-index:50;background:var(--s2);backdrop-filter:saturate(160%) blur(18px);
  padding:14px var(--pad) 10px;border-bottom:1px solid rgba(255,255,255,.04);box-shadow:var(--neu-out)}
.brand-compact{display:flex;align-items:center;gap:14px}
#miniLogo{width:42px;height:42px;border-radius:12px;object-fit:cover;box-shadow:var(--neu-out)}
.search-container{flex:1}
#searchInput{width:100%;padding:12px 16px;border:none;border-radius:14px;color:var(--text);background:var(--surface);box-shadow:var(--neu-in);outline:none}
#resultsCount{padding:8px 2px 0;color:var(--muted);font-weight:600}
.nowplaying{margin-top:10px;display:flex;align-items:center;gap:12px;background:var(--surface);padding:8px;border-radius:14px;box-shadow:var(--neu-in)}
.nowplaying.hidden{display:none}
.nowplaying img{width:36px;height:36px;border-radius:50%;object-fit:cover}
.np-meta{min-width:0;flex:1}
.np-title{font-size:.9rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.np-btn{width:38px;height:38px;border:none;border-radius:50%;display:grid;place-items:center;background:var(--s3);color:#fff;box-shadow:var(--neu-out);cursor:pointer;padding:0;line-height:0;appearance:none}
.np-btn .i-pause{display:none}.np-btn.playing .i-play{display:none}.np-btn.playing .i-pause{display:block}

/* Views */
.view{display:none;padding:12px var(--pad) 170px} /* 170px = seek + tabbar margen */
.view.active{display:block}
.section-title{margin:8px 0 12px}
.muted{color:var(--muted)} .up{text-transform:uppercase;letter-spacing:.08em;font-weight:600;font-size:.75rem}

/* Lists */
.results,.list{display:flex;flex-direction:column;gap:10px}

/* CARD = grid para que no se “escape” nada */
.card{
  display:grid; grid-template-columns:64px 1fr auto; align-items:center; gap:14px;
  padding:12px 14px; background:var(--surface); border-radius:var(--r); box-shadow:var(--neu-out);
  width:100%; max-width:100%; overflow:hidden; position:relative;
}
.card:hover{transform:translateY(-1px)}
.thumb-wrap{grid-column:1; position:relative; width:64px; height:64px; flex:0 0 64px}
.thumb{width:64px;height:64px;border-radius:50%;object-fit:cover;box-shadow:var(--neu-out)}
.play-overlay{position:absolute;inset:0;display:grid;place-items:center;border-radius:50%;background:rgba(0,0,0,.25);opacity:0;transition:.2s}
.thumb-wrap:hover .play-overlay{opacity:1}
.play-overlay button{width:34px;height:34px;border:none;border-radius:50%;background:var(--accent);color:#fff;display:grid;place-items:center;box-shadow:0 6px 16px rgba(239,68,68,.35);cursor:pointer;padding:0;line-height:0;appearance:none}

.meta{grid-column:2; min-width:0}
.title{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sub{color:var(--muted);font-size:.9rem}
.eq{display:none;gap:2px;align-items:flex-end;width:18px;height:16px;margin-top:4px}
.eq span{width:3px;height:100%;background:linear-gradient(to top,var(--accent),#f87171);border-radius:2px;animation:bar 1.2s ease-in-out infinite;opacity:.9}
.eq span:nth-child(2){animation-delay:.2s}.eq span:nth-child(3){animation-delay:.4s}
@keyframes bar{0%,100%{transform:scaleY(.2);opacity:.4}50%{transform:scaleY(1);opacity:1}}
.is-playing .eq{display:inline-flex}

.actions{
  grid-column:3; display:flex; align-items:center; gap:8px; margin-left:auto;
}
.icon-btn{
  width:38px;height:38px;border:none;border-radius:12px;background:var(--s3);color:#fff;
  display:inline-flex;align-items:center;justify-content:center;box-shadow:var(--neu-out);
  cursor:pointer;padding:0;line-height:0;appearance:none;
}
.icon-btn svg{width:18px;height:18px}
.icon-btn.heart.active{background:rgba(239,68,68,.15);color:#ff6b6b}

/* Rows (favoritos/queue) comparten estilo card light */
.row{
  display:grid; grid-template-columns:64px 1fr auto; align-items:center; gap:14px;
  padding:12px 14px; background:var(--surface); border-radius:var(--r); box-shadow:var(--neu-out);
}
.row .thumb-wrap{width:64px;height:64px}
.row .thumb{width:64px;height:64px;border-radius:50%;object-fit:cover;box-shadow:var(--neu-out)}
.row .meta{min-width:0}
.row .actions, .row .menu-btn{margin-left:auto}

/* Playlists */
.playlists-header{display:flex;align-items:center;justify-content:space-between}
.chip{background:var(--s3);color:#fff;border:none;border-radius:999px;padding:10px 14px;box-shadow:var(--neu-out);cursor:pointer}
.chip.full{width:100%}
.pl-list{display:flex;flex-direction:column;gap:12px}
.pl-item{display:grid;grid-template-columns:46px 1fr auto;align-items:center;gap:12px;background:var(--surface);padding:12px;border-radius:16px;box-shadow:var(--neu-out);cursor:pointer}
.pl-item .cover{width:46px;height:46px;border-radius:50%;object-fit:cover;box-shadow:var(--neu-out)}
.empty{margin-top:8px}

/* Seek bar footer */
.seek-footer{position:fixed;left:0;right:0;bottom:64px;z-index:45;background:var(--s2);padding:8px var(--pad);border-top:1px solid rgba(255,255,255,.05);box-shadow:var(--neu-out)}
.time-row{display:flex;justify-content:space-between;color:var(--muted);font-weight:600;font-variant-numeric:tabular-nums}
.seek-bar{width:100%;appearance:none;height:8px;border-radius:6px;background:var(--surface);box-shadow:var(--neu-in);cursor:pointer}
.seek-bar::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 6px 16px rgba(239,68,68,.35)}
.footer-text{text-align:center;color:var(--sub);font-size:.8rem;margin-top:6px}

/* Tabbar */
.tabbar{position:fixed;left:0;right:0;bottom:0;z-index:46;display:grid;grid-template-columns:repeat(4,1fr);background:var(--s2);border-top:1px solid rgba(255,255,255,.06);box-shadow:var(--neu-out)}
.tab{padding:10px 4px;background:none;border:none;color:#cbd5e1;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer}
.tab svg{width:20px;height:20px;fill:currentColor}
.tab.active{color:#fff}

/* Action sheet */
.sheet.hidden{display:none}
.sheet{position:fixed;inset:0;z-index:200}
.sheet-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(6px)}
.sheet-card{position:absolute;left:0;right:0;bottom:0;background:var(--s2);border-radius:18px 18px 0 0;padding:14px;box-shadow:0 -18px 48px rgba(0,0,0,.55)}
.sheet-card ul{list-style:none;margin:0 0 10px;padding:0;display:flex;flex-direction:column;gap:8px}
.sheet-card li button{width:100%;text-align:left;border:none;border-radius:12px;padding:12px 14px;background:var(--surface);color:#fff;box-shadow:var(--neu-out);cursor:pointer}

/* sentinel */
.sentinel{height:1px}

/* hide youtube */
#yt-holder,#player,#player iframe{position:absolute!important;width:1px!important;height:1px!important;left:-9999px!important;top:-9999px!important;opacity:0!important;pointer-events:none!important;z-index:-1!important}

/* Responsive */
@media (max-width:480px){ :root{--pad:16px} }
