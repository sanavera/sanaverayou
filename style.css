:root{
  --bg:#08090c; --bg-secondary:#0d0e12;
  --surface:#1a1c24; --surface-hover:#20222b; --surface-elevated:#242731;
  --border:#2d3142; --border-subtle:#1e2029;
  --text-primary:#f8fafc; --text-secondary:#94a3b8; --text-muted:#64748b;

  --accent:#ef4444; --accent-hover:#dc2626; --accent-light:#f87171;
  --dots:#ff6b6b;

  --title-size:14px; --subtitle-size:12px;

  --radius:16px; --radius-sm:12px; --radius-lg:24px; --side-pad:20px;

  --seek-h:72px;   /* más compacto para unirse con la barra */
  --nav-h:64px;
  --safe:env(safe-area-inset-bottom);

  --neu-shadow:6px 6px 16px rgba(0,0,0,.3), -6px -6px 12px rgba(255,255,255,.02);
  --neu-elevated-shadow:10px 10px 24px rgba(0,0,0,.4), -8px -8px 16px rgba(255,255,255,.03);
  --neu-inset-shadow:inset 4px 4px 8px rgba(0,0,0,.2), inset -4px -4px 8px rgba(255,255,255,.01);

  --transition:all .3s cubic-bezier(.4,0,.2,1);
  --fast:all .15s ease-out;
}

html{color-scheme:dark}
*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(circle at 20% 80%,rgba(59,130,246,.05)0%,transparent 50%),
             radial-gradient(circle at 80% 20%,rgba(139,92,246,.03)0%,transparent 50%),
             linear-gradient(135deg,var(--bg)0%,var(--bg-secondary)100%);
  color:var(--text-primary);
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
.muted{color:var(--text-muted)}
.up{ text-transform:uppercase; letter-spacing:.08em; font-weight:700; font-size:.7rem; }
.hide{display:none !important}

/* Topbar */
.topbar{
  position:sticky; top:0; z-index:50;
  background:rgba(26,28,36,.85);
  backdrop-filter:blur(16px) saturate(180%);
  -webkit-backdrop-filter:blur(16px) saturate(180%);
  padding:12px var(--side-pad) 10px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.brand-compact{display:flex; align-items:center; gap:12px;}
#miniLogo{width:36px;height:36px;border-radius:10px;object-fit:cover;border:1px solid rgba(255,255,255,.1)}
.app-title{font-weight:700;}

/* Lupa flotante */
.search-fab{
  margin-left:auto;
  width:36px;height:36px;border-radius:18px;border:1px solid rgba(255,255,255,.1);
  display:grid;place-items:center;cursor:pointer;background:rgba(255,255,255,.06);
  color:#cbd5e1; transition:var(--fast);
}
.search-fab:hover{background:rgba(255,255,255,.12); transform:translateY(-1px);}
.search-fab-global{
  position:fixed; right:12px; top:12px; z-index:1200;
  backdrop-filter:blur(8px); -webkit-backdrop-filter:blur(8px);
}

/* Overlay de búsqueda */
.search-overlay{
  position:fixed; inset:0; display:none; z-index:1100;
  background:rgba(0,0,0,.45); backdrop-filter:blur(2px);
}
.search-overlay.show{display:block;}
.search-card{
  position:absolute; left:12px; right:12px; top:14px;
  background:rgba(26,28,36,.95); border:1px solid rgba(255,255,255,.12);
  border-radius:14px; padding:10px 12px;
  box-shadow:0 8px 32px rgba(0,0,0,.35);
}
#overlaySearchInput{
  width:100%; background:rgba(36,39,49,.6); color:#fff;
  border:1px solid rgba(255,255,255,.08); border-radius:10px;
  padding:12px 14px; outline:none; font-size:15px;
}
#overlaySearchInput:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(239,68,68,.1);}

/* Vistas */
.view{display:none; padding:12px var(--side-pad) calc(var(--seek-h) + var(--nav-h) + 16px + var(--safe));}
.view.active{display:block}

/* Filas (solo la seleccionada parece “card”) */
.results,.fav-list{display:flex;flex-direction:column;gap:0}
.result-item,.fav-item,.queue-item{
  display:flex;align-items:center;gap:14px;padding:12px 14px;cursor:pointer;
  transition:var(--transition);border-bottom:1px solid var(--border-subtle);
}
.result-item:hover,.fav-item:hover,.queue-item:hover{background:var(--surface-hover)}
.result-item.is-playing,.fav-item.is-playing,.queue-item.is-playing{
  background:var(--surface-hover); border:1px solid var(--accent);
  border-radius:16px; box-shadow:0 6px 20px rgba(239,68,68,.12);
}

/* Thumb + play */
.thumb-wrap{position:relative;width:64px;height:64px;flex:0 0 64px}
.thumb{width:64px;height:64px;border-radius:12px;object-fit:cover;border:2px solid rgba(255,255,255,.08)}
.card-play{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:42px;height:42px;border-radius:50%;border:none;display:grid;place-items:center;color:#fff;background:rgba(0,0,0,.55)}
.card-play .i-pause{display:none}
.card-play.playing .i-play{display:none}
.card-play.playing .i-pause{display:block}

/* Meta */
.meta{min-width:0;flex:1}
.title-line{display:flex;align-items:center;gap:10px;min-width:0}
.title-text{font-weight:600;font-size:var(--title-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.subtitle{font-size:var(--subtitle-size);color:var(--text-secondary);margin-top:4px}

/* Acciones (tres puntitos) */
.actions{display:flex;gap:6px;margin-left:auto}
.icon-btn{width:40px;height:40px;border-radius:12px;border:none;background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer}
.icon-btn.more, .icon-btn.more svg, .icon-btn.more path{color:var(--dots)!important;fill:var(--dots)!important}

/* EQ */
.eq{display:none;align-items:flex-end;gap:2px;width:18px;height:16px}
.eq span{width:3px;height:100%;border-radius:2px;background:linear-gradient(to top,var(--accent),var(--accent-light));animation:bar 1.2s ease-in-out infinite}
.eq span:nth-child(2){animation-delay:.2s}
.eq span:nth-child(3){animation-delay:.4s}
@keyframes bar{0%,100%{transform:scaleY(.2);opacity:.4}50%{transform:scaleY(1);opacity:1}}
.result-item.is-playing .eq,.fav-item.is-playing .eq,.queue-item.is-playing .eq{display:inline-flex}

/* Favoritos hero */
.fav-hero{position:relative;aspect-ratio:16/9;max-height:40vh;background:var(--surface) center/cover no-repeat;border-radius:16px;border:1px solid rgba(255,255,255,.08);margin-bottom:12px}
.fav-hero::before{content:"";position:absolute;inset:0;border-radius:inherit;background:linear-gradient(to top,rgba(8,9,12,.9)0%,rgba(8,9,12,.5)40%,rgba(8,9,12,0)100%)}
.fav-hero-text{position:absolute;left:var(--side-pad);right:var(--side-pad);bottom:16px}

/* Reproductor */
.np-hero{position:relative;aspect-ratio:1/1;max-width:520px;margin:8px auto 10px;background:var(--surface) center/cover no-repeat;border-radius:22px;border:1px solid rgba(255,255,255,.1)}
.np-play{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:82px;height:82px;border-radius:50%;border:none;display:grid;place-items:center;color:#fff;background:linear-gradient(135deg,var(--accent),var(--accent-hover));box-shadow:0 12px 32px rgba(239,68,68,.35)}
.np-play .i-pause{display:none}.np-play.playing .i-play{display:none}.np-play.playing .i-pause{display:block}
.np-menu{position:absolute;right:12px;top:12px;width:44px;height:44px;border-radius:14px;border:1px solid rgba(255,255,255,.1);background:rgba(36,39,49,.8);display:grid;place-items:center}
.np-meta{text-align:center}.np-title{font-size:18px;font-weight:700;margin:6px 0 4px}.np-sub{font-size:13px}

/* Cola (debajo del hero) */
.queue-panel{margin-top:6px}
.queue-item .actions{margin-left:auto}

/* Mini-reproductor unido a la barra inferior */
.seek-dock{
  position:fixed;left:0;right:0;bottom:var(--nav-h);z-index:70;
  background:rgba(13,14,18,.95); /* igual a bottom-nav */
  border-top:1px solid rgba(255,255,255,.08);
  padding:6px 10px 8px; box-shadow:0 -4px 12px rgba(0,0,0,.18);
}
.mini-now{display:flex;align-items:center;gap:10px;background:rgba(36,39,49,.55);border:1px solid rgba(255,255,255,.08);border-radius:12px;padding:6px 8px}
.mini-now.hide{display:none}
.mini-thumb{width:34px;height:34px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,.08)}
.mini-btn{width:34px;height:34px;border:none;border-radius:50%;display:grid;place-items:center;background:linear-gradient(135deg,var(--accent),var(--accent-hover));color:#fff}
.mini-btn .i-pause{display:none}.mini-btn.playing .i-play{display:none}.mini-btn.playing .i-pause{display:block}
.mini-now .seek-bar{flex:1;min-width:120px;appearance:none;height:6px;border-radius:3px;background:rgba(255,255,255,.12)}
.mini-now .seek-bar::-webkit-slider-thumb{appearance:none;width:14px;height:14px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent-light))}

.time-inline{display:flex;gap:6px;color:var(--text-secondary);font-size:12px}
.mini-credit{flex-basis:100%;text-align:center;font-size:10px;color:var(--text-muted);margin-top:2px}

/* Bottom nav más limpia (look YouTube) */
.bottom-nav{
  position:fixed;left:0;right:0;bottom:0;z-index:80;height:var(--nav-h);
  padding:4px 6px max(6px,var(--safe)); background:rgba(13,14,18,.95);
  border-top:1px solid rgba(255,255,255,.08);
  display:grid;grid-template-columns:repeat(4,1fr);gap:4px;
}
.nav-btn{background:transparent;border:none;color:#cbd5e1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;border-radius:10px;padding:4px 0}
.nav-btn svg{width:22px;height:22px}
.nav-btn span{font-size:11px}
.nav-btn.active{color:#fff}
.nav-btn:active{transform:scale(.96)}

#yt-holder,#player,#player iframe{
  position:absolute!important;width:1px!important;height:1px!important;left:-9999px!important;top:-9999px!important;opacity:0!important;pointer-events:none!important;z-index:-1!important;
}

@media (max-width:480px){
  :root{--side-pad:16px}
  .np-hero{border-radius:18px}
  .nav-btn svg{width:20px;height:20px}
}
