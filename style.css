:root{
  --bg:#08090c; --bg-secondary:#0d0e12;
  --surface:#151720; --surface-2:#1b1e28; --surface-3:#222634;
  --border:#2d3142; --text:#f8fafc; --muted:#94a3b8; --sub:#64748b;
  --accent:#ef4444; --accent-2:#dc2626;
  --radius:16px; --r-sm:12px; --r-lg:22px;
  --pad:20px;
  --controls-h:120px;

  /* neumorphism */
  --neu-out: 8px 8px 16px rgba(0,0,0,.5), -6px -6px 14px rgba(255,255,255,.03);
  --neu-in : inset 8px 8px 16px rgba(0,0,0,.45), inset -6px -6px 14px rgba(255,255,255,.03);
}

html{color-scheme:dark}
body{
  margin:0; font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  background: radial-gradient(circle at 20% 80%, rgba(59,130,246,.05) 0, transparent 50%),
              radial-gradient(circle at 80% 20%, rgba(139,92,246,.04) 0, transparent 50%),
              linear-gradient(135deg, var(--bg), var(--bg-secondary));
  color:var(--text);
}
*{box-sizing:border-box}
.muted{color:var(--muted)} .up{text-transform:uppercase;letter-spacing:.08em;font-weight:600;font-size:.75rem;}

.topbar{
  position:sticky;top:0;z-index:50;background:var(--surface-2);
  backdrop-filter:saturate(160%) blur(18px);
  padding:14px var(--pad) 10px;border-bottom:1px solid rgba(255,255,255,.04);
  box-shadow:var(--neu-out);
}
.brand-compact{display:flex;align-items:center;gap:14px}
#miniLogo{width:42px;height:42px;border-radius:12px;object-fit:cover;box-shadow:var(--neu-out)}
.search-container{flex:1}
#searchInput{
  width:100%; padding:12px 16px; border:none; outline:0; border-radius:14px;
  color:var(--text); background:var(--surface); box-shadow:var(--neu-in);
}
#resultsCount{padding:10px 2px 0; color:var(--muted); font-weight:600}

/* mini player in header */
.nowplaying{margin-top:10px;display:flex;align-items:center;gap:12px;background:var(--surface);padding:8px;border-radius:14px;box-shadow:var(--neu-in)}
.nowplaying.hidden{display:none}
.nowplaying img{width:36px;height:36px;border-radius:50%;object-fit:cover}
.np-meta{min-width:0;flex:1}
.np-title{font-size:.9rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.np-btn{width:38px;height:38px;border:none;border-radius:50%;display:grid;place-items:center;background:var(--surface-3);color:white;box-shadow:var(--neu-out);cursor:pointer}
.np-btn .i-pause{display:none}
.np-btn.playing .i-play{display:none}
.np-btn.playing .i-pause{display:block}

/* views */
.view{display:none;padding:10px var(--pad) calc(var(--controls-h) + 160px)}
.view.active{display:block}
.section-title{margin:10px 0 12px}

/* results / list cards */
.results,.list{display:flex;flex-direction:column;gap:10px}
.card,.row{
  display:flex;align-items:center;gap:14px;padding:12px 14px;background:var(--surface);
  border-radius:var(--radius); box-shadow:var(--neu-out); position:relative;
}
.card:hover,.row:hover{transform:translateY(-1px)}
.thumb-wrap{position:relative;width:64px;height:64px;flex:0 0 64px}
.thumb{width:64px;height:64px;border-radius:50%;object-fit:cover;box-shadow:var(--neu-out)}
.play-overlay{
  position:absolute;inset:0;display:grid;place-items:center;border-radius:50%;
  background:rgba(0,0,0,.25);opacity:.0;transition:.2s;
}
.thumb-wrap:hover .play-overlay{opacity:1}
.play-overlay button{
  width:34px;height:34px;border:none;border-radius:50%;background:var(--accent);color:white;
  display:grid;place-items:center;box-shadow:0 6px 16px rgba(239,68,68,.35);cursor:pointer;
}
.title{font-weight:700;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.sub{color:var(--muted);font-size:.9rem}
.actions{margin-left:auto;display:flex;align-items:center;gap:8px}
.icon-btn{
  width:38px;height:38px;border:none;border-radius:12px;background:var(--surface-3);color:#fff;
  display:grid;place-items:center;box-shadow:var(--neu-out);cursor:pointer;
}
.icon-btn.heart.active{background:rgba(239,68,68,.15);color:#ff6b6b}
.icon-btn svg{width:18px;height:18px}

/* EQ */
.eq{display:none;gap:2px;align-items:flex-end;width:18px;height:16px}
.eq span{width:3px;height:100%;background:linear-gradient(to top,var(--accent),#f87171);border-radius:2px;animation:bar 1.2s ease-in-out infinite;opacity:.9}
.eq span:nth-child(2){animation-delay:.2s}.eq span:nth-child(3){animation-delay:.4s}
@keyframes bar{0%,100%{transform:scaleY(.2);opacity:.4}50%{transform:scaleY(1);opacity:1}}
.is-playing .eq{display:inline-flex}

/* playlists */
.playlists-header{display:flex;align-items:center;justify-content:space-between}
.chip{background:var(--surface-3);color:#fff;border:none;border-radius:999px;padding:10px 14px;box-shadow:var(--neu-out);cursor:pointer}
.chip.full{width:100%}
.pl-list{display:flex;flex-direction:column;gap:12px;margin:10px 0}
.pl-item{display:flex;align-items:center;gap:12px;background:var(--surface);padding:12px;border-radius:16px;box-shadow:var(--neu-out);cursor:pointer}
.pl-item .cover{width:46px;height:46px;border-radius:50%;object-fit:cover;box-shadow:var(--neu-out)}
.empty{margin-top:8px}

/* player queue rows share .row */
.row .title{font-weight:600}
.row .sub{font-size:.85rem}

/* seekbar footer */
.seek-footer{
  position:fixed;left:0;right:0;bottom:64px;z-index:45;background:var(--surface-2);
  padding:8px var(--pad);border-top:1px solid rgba(255,255,255,.05);box-shadow:var(--neu-out);
}
.time-row{display:flex;justify-content:space-between;color:var(--muted);font-weight:600;font-variant-numeric:tabular-nums}
.seek-bar{width:100%;appearance:none;height:8px;border-radius:6px;background:var(--surface);box-shadow:var(--neu-in);cursor:pointer}
.seek-bar::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:var(--accent);box-shadow:0 6px 16px rgba(239,68,68,.35)}
.footer-text{text-align:center;color:var(--sub);font-size:.8rem;margin-top:6px}

/* tabbar */
.tabbar{
  position:fixed;left:0;right:0;bottom:0;z-index:46;display:grid;grid-template-columns:repeat(4,1fr);
  background:var(--surface-2);border-top:1px solid rgba(255,255,255,.06);box-shadow:var(--neu-out)
}
.tab{padding:10px 4px;background:none;border:none;color:#cbd5e1;display:flex;flex-direction:column;align-items:center;gap:4px;cursor:pointer}
.tab svg{width:20px;height:20px;fill:currentColor}
.tab.active{color:#fff}

/* action sheet */
.sheet.hidden{display:none}
.sheet{position:fixed;inset:0;z-index:200}
.sheet-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.4);backdrop-filter:blur(6px)}
.sheet-card{
  position:absolute;left:0;right:0;bottom:0;background:var(--surface-2);border-radius:18px 18px 0 0;
  padding:14px;box-shadow:0 -18px 48px rgba(0,0,0,.55)
}
.sheet-card ul{list-style:none;margin:0 0 10px;padding:0;display:flex;flex-direction:column;gap:8px}
.sheet-card li button{width:100%;text-align:left;border:none;border-radius:12px;padding:12px 14px;background:var(--surface);color:#fff;box-shadow:var(--neu-out);cursor:pointer}

/* sentinel for infinite scroll */
.sentinel{height:1px}

/* hide youtube */
#yt-holder,#player,#player iframe{position:absolute!important;width:1px!important;height:1px!important;left:-9999px!important;top:-9999px!important;opacity:0!important;pointer-events:none!important;z-index:-1!important}

/* helpers */
.list .menu-btn{margin-left:auto}

/* responsive tweaks */
@media (max-width:480px){
  :root{--pad:16px}
}
