/* ================== THEME TOKENS (Dark por defecto) ================== */
:root{
  /* superficies y texto */
  --bg:#08090c; --bg-secondary:#0d0e12;
  --surface:#1a1c24; --surface-hover:#20222b; --surface-elevated:#242731;
  --border:#2d3142; --border-subtle:#1e2029;

  /* acento */
  --accent:#ef4444; --accent-hover:#dc2626; --accent-light:#f87171;
  --dots:#ff6b6b;

  /* navegación / player */
  --dock-bg:#0b0a11;        /* fondo de barra inferior y dock */
  --mini-bg:rgba(11,10,17,1);
  --track-bg:rgba(255,255,255,.12);
  --nav-ink:#cbd5e1; --nav-ink-hover:#e5e7eb; --nav-ink-active:#ffffff;

  --title-size:14px; --subtitle-size:12px;

  --radius:16px; --radius-sm:12px; --side-pad:20px;

  --seek-h:72px; --nav-h:64px;
  --safe:env(safe-area-inset-bottom);
  --fast:200ms ease;
  --slow:400ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
}
[data-theme="light"]{
  --bg:#fafafa; --bg-secondary:#f1f5f9;
  --surface:#ffffff; --surface-hover:#f8fafc; --surface-elevated:#f1f5f9;
  --border:#e2e8f0; --border-subtle:#f1f5f9;

  --text-primary:#0f172a; --text-secondary:#64748b; --text-muted:#94a3b8;

  --accent:#dc2626; --accent-hover:#b91c1c; --accent-light:#f87171;

  --dock-bg:#f8fafc;
  --mini-bg:rgba(255,255,255,1);
  --track-bg:rgba(0,0,0,.12);
  --nav-ink:#64748b; --nav-ink-hover:#475569; --nav-ink-active:#0f172a;
}
/* ================== GENERALES ================== */
* { box-sizing:border-box; }
html, body{ height:100%; }
body{
  font-family:"Inter", sans-serif; -webkit-font-smoothing:antialiased;
  background:var(--bg); color:var(--text-primary);
  margin:0; padding:0;
  overflow-x:hidden;
}
svg{ display:block; }
a{ text-decoration:none; color:var(--accent); }
h1,h2,h3,h4,h5{ margin:0; }
button{
  background:none; border:none; color:inherit; font:inherit; cursor:pointer;
  padding:0; display:flex; align-items:center; justify-content:center;
}
.icon-dots{ color:var(--text-secondary); }
.content-wrapper{
  padding: var(--seek-h) var(--side-pad) calc(var(--nav-h) + var(--safe) + 12px);
  max-width:800px; margin:0 auto;
  position:relative;
}
.view{
  position:absolute; inset:var(--seek-h) 0 calc(var(--nav-h) + var(--safe) + 12px) 0;
  max-width:800px; margin:0 auto;
  opacity:0; visibility:hidden; z-index:0;
  overflow-y:auto; overflow-x:hidden;
  transition: opacity var(--slow), transform var(--slow);
  transform: translateY(20px);
}
.view.active{
  opacity:1; visibility:visible; z-index:1;
  position:relative;
  transform: translateY(0);
}
.view.moving{
  pointer-events:none;
}
.home-hero-header{
  display:flex; flex-direction:column; justify-content:center;
  height:120px;
}
.home-title{ margin:0; font-size:32px; font-weight:700; }
.home-sub{ margin:0; font-size:16px; color:var(--text-secondary); }
.home-grid{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap:12px;
}
.home-card{
  position:relative; border-radius:14px; overflow:hidden;
  background:var(--surface); border:1px solid var(--border-subtle);
  cursor:pointer; transition:var(--fast); aspect-ratio:16/9;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.home-card:hover{ transform:translateY(-4px); background:var(--surface-hover); border-color:var(--border); box-shadow: 0 8px 20px rgba(0,0,0,0.2); }
.home-card img{ width:100%; height:100%; object-fit:cover; display:block; transition: transform var(--slow); }
.home-card:hover img{ transform: scale(1.05); }
.home-card::after{ content:""; position:absolute; inset:0;
  background:linear-gradient(to top, rgba(8,9,12,.85) 0%, rgba(8,9,12,.2) 60%, rgba(8,9,12,0) 100%); }
.home-card .home-meta{ position:absolute; left:10px; right:10px; bottom:8px; z-index:1; }
.home-card .home-title-card{ font-size:14px; font-weight:600; text-shadow:1px 1px 2px rgba(0,0,0,0.7); }
.home-card .home-author-card{ font-size:12px; color:var(--text-secondary); text-shadow:1px 1px 2px rgba(0,0,0,0.7); }
/* ================== NAVEGACIÓN / REPRODUCTOR ================== */
.nav-bar{
  position:fixed; bottom:0; left:0; right:0; z-index:99;
  background:var(--dock-bg);
  height:calc(var(--nav-h) + var(--safe));
  padding:0 var(--side-pad) var(--safe);
  display:flex; justify-content:space-around; align-items:center;
  box-shadow:0 -2px 10px rgba(0,0,0,.2);
}
.nav-btn{
  flex:1; height:100%;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  gap:2px; font-size:10px; font-weight:500;
  color:var(--nav-ink); transition:var(--fast);
  -webkit-tap-highlight-color:transparent;
}
.nav-btn svg{ width:24px; height:24px; transition:var(--fast); }
.nav-btn.active{ color:var(--nav-ink-active); }
.nav-btn:hover{ color:var(--nav-ink-hover); }
.nav-btn.active svg{ transform:scale(1.1); }
.logo-float{
  position:fixed; top:12px; left:20px;
  width:40px; height:40px; border-radius:50%;
  z-index:100; box-shadow:0 2px 8px rgba(0,0,0,.2);
}
.search-fab{
  position:fixed; bottom:calc(var(--nav-h) + var(--safe) + 12px);
  right:var(--side-pad); width:56px; height:56px;
  border-radius:50%; background:var(--accent); color:#fff;
  box-shadow:0 4px 10px rgba(0,0,0,.2); z-index:90;
}
.search-fab-global{
  position:fixed; top:20px; right:20px;
  bottom:auto; transform:scale(0);
  transition:transform var(--fast);
}
body[data-view-active="view-search"] .search-fab-global{ transform:scale(1); }
.theme-toggle{
  position:fixed; top:20px; right:88px; z-index:100;
  width:40px; height:40px; border-radius:50%;
  background:var(--surface-elevated); box-shadow:0 2px 8px rgba(0,0,0,.15);
  display:flex; align-items:center; justify-content:center;
}
.theme-toggle .ico{
  width:20px; height:20px;
  transition:var(--fast);
}
.theme-toggle .ico.sun{
  background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm0 18c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8z"/></svg>') center/contain no-repeat;
  opacity:0; transform:scale(0);
}
.theme-toggle .ico.moon{
  background:url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white"><path d="M12 2a10 10 0 100 20A10 10 0 0012 2zM6.5 10A3.5 3.5 0 0110 6.5C10 3.96 7.93 2 5.5 2 2.96 2 1 4.07 1 6.5A3.5 3.5 0 014.5 10c0 2.54 2.07 4.5 4.5 4.5 2.54 0 4.5-2.07 4.5-4.5V2h-1c-2.76 0-5 2.24-5 5S6 12 6 12s-1 1-1 1-1.5-.5-1.5-.5-2.5 1-2.5 1c-2 0-3.5-1.5-3.5-3.5s1.5-3.5 3.5-3.5z"/></svg>') center/contain no-repeat;
  opacity:1; transform:scale(1);
}
[data-theme="light"] .theme-toggle .ico.sun{ opacity:1; transform:scale(1); }
[data-theme="light"] .theme-toggle .ico.moon{ opacity:0; transform:scale(0); }
/* ================== BUSCADOR ================== */
.search-input-wrapper{
  position:relative; width:100%;
}
.search-input{
  width:100%; height:56px;
  background:var(--surface-elevated); border:1px solid var(--border);
  border-radius:28px; padding:0 50px 0 20px;
  font-size:16px; color:var(--text-primary);
  transition:var(--fast);
}
.search-input:focus{
  outline:none; border-color:var(--accent);
}
.search-clear-btn{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  width:40px; height:40px; border-radius:50%;
  color:var(--text-secondary); opacity:0; pointer-events:none;
}
.search-input:focus ~ .search-clear-btn{
  opacity:1; pointer-events:auto;
}
.search-results-grid{
  margin-top:20px;
  display:grid; gap:12px;
}
.search-card{
  display:flex; align-items:center; gap:12px;
  background:var(--surface); border-radius:12px;
  padding:8px; border:1px solid var(--border-subtle);
  cursor:pointer;
  transition:var(--fast);
}
.search-card:hover{
  background:var(--surface-hover); border-color:var(--border);
  transform:translateY(-2px);
}
.search-card img{
  width:80px; height:45px; object-fit:cover; border-radius:8px;
}
.search-meta{
  flex:1;
}
.search-title{ font-size:14px; font-weight:600; }
.search-author{ font-size:12px; color:var(--text-secondary); }
.search-card .dots-btn{
  width:40px; height:40px; flex-shrink:0;
  color:var(--text-secondary); opacity:0;
}
.search-card:hover .dots-btn{ opacity:1; }
/* ================== MINI-PLAYER ================== */
.miniplayer-container{
  position:fixed; bottom:calc(var(--nav-h) + var(--safe) + 12px);
  left:var(--side-pad); right:var(--side-pad);
  padding:8px 12px;
  background:var(--mini-bg); border-radius:16px;
  border:1px solid var(--border);
  backdrop-filter:blur(8px);
  z-index:100;
  box-shadow:0 4px 15px rgba(0,0,0,0.3);
  transform:translateY(150%);
  transition:transform var(--slow);
}
.miniplayer-container.active{
  transform:translateY(0);
}
.miniplayer-track-info{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px;
}
.miniplayer-track{
  flex:1; text-align:left;
  -webkit-tap-highlight-color:transparent;
}
.miniplayer-title{
  font-size:14px; font-weight:600;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.miniplayer-author{
  font-size:12px; color:var(--text-secondary);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.miniplayer-controls{
  display:flex; gap:8px;
}
.miniplayer-btn{
  width:40px; height:40px; border-radius:50%;
  background:var(--surface-elevated); color:var(--text-primary);
  flex-shrink:0;
}
.miniplayer-btn svg{
  width:24px; height:24px;
}
.miniplayer-btn .play-icon{ display:block; }
.miniplayer-btn .pause-icon{ display:none; }
.miniplayer-container.playing .miniplayer-btn .play-icon{ display:none; }
.miniplayer-container.playing .miniplayer-btn .pause-icon{ display:block; }
/* ================== OTROS ================== */
.hero-header{
  display:flex; align-items:center;
  gap:20px; margin-bottom:20px;
}
.back-btn{
  flex-shrink:0; width:48px; height:48px; border-radius:50%;
  background:var(--surface-elevated);
}
.back-btn svg{ width:24px; height:24px; }
.hero-title-box{ flex:1; }
.hero-title{ font-size:24px; font-weight:700; }
.hero-sub{ font-size:14px; color:var(--text-secondary); }
.favs-grid, .playlists-grid{
  display:grid; gap:12px;
}
.fav-card, .playlist-card{
  display:flex; align-items:center; gap:12px;
  background:var(--surface); border-radius:12px;
  padding:8px; border:1px solid var(--border-subtle);
  cursor:pointer; transition:var(--fast);
}
.fav-card:hover, .playlist-card:hover{
  background:var(--surface-hover); border-color:var(--border);
  transform:translateY(-2px);
}
.fav-card img, .playlist-card img{
  width:80px; height:45px; object-fit:cover; border-radius:8px;
}
.fav-meta, .playlist-meta{ flex:1; }
.fav-title, .playlist-title{ font-size:14px; font-weight:600; }
.fav-author, .playlist-sub{ font-size:12px; color:var(--text-secondary); }
.fav-card .dots-btn, .playlist-card .dots-btn{
  width:40px; height:40px; flex-shrink:0;
  color:var(--text-secondary); opacity:0;
}
.fav-card:hover .dots-btn, .playlist-card:hover .dots-btn{ opacity:1; }

.player-header{
  position:relative;
}
.player-thumbnail{
  width:100%; aspect-ratio:16/9;
  border-radius:16px; overflow:hidden;
}
#youtubePlayer{
  position:relative; width:100%; aspect-ratio:16/9;
}
.player-meta{
  margin-top:16px;
  display:flex; align-items:center; gap:12px;
}
.player-meta img{ width:48px; height:48px; border-radius:50%; }
.player-title-box{ flex:1; }
.player-title{ font-size:16px; font-weight:700; }
.player-author{ font-size:14px; color:var(--text-secondary); }
.player-buttons{
  display:flex; gap:8px;
}
.player-buttons .btn{
  width:48px; height:48px; border-radius:50%;
  background:var(--surface-elevated);
}
.player-buttons .btn svg{ width:24px; height:24px; }
